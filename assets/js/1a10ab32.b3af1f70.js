"use strict";(self.webpackChunkuimotelndefined=self.webpackChunkuimotelndefined||[]).push([[752],{9530:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>r,default:()=>h,frontMatter:()=>l,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"developers/SimotelWebhooks/DialplanApiComponents/smart_api","title":"Smart API","description":"SmartAPI is a semi-interactive component used to execute a combination of commands on a server. It receives commands via a web service and applies them sequentially on calls. If an error occurs in one command, the execution of subsequent commands is halted. Additionally, you can create multiple outputs with different names for this component and manage the call routing to these outputs.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/developers/3-SimotelWebhooks/3-DialplanApiComponents/6-smart_api.md","sourceDirName":"developers/3-SimotelWebhooks/3-DialplanApiComponents","slug":"/developers/SimotelWebhooks/DialplanApiComponents/smart_api","permalink":"/developers/SimotelWebhooks/DialplanApiComponents/smart_api","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":6,"frontMatter":{},"sidebar":"docs","previous":{"title":"IVR API","permalink":"/developers/SimotelWebhooks/DialplanApiComponents/ivr_api"},"next":{"title":"Smart API","permalink":"/developers/Scenarios/smart_api"}}');var a=i(4848),s=i(8453);const l={title:void 0},r="Smart API",o={},c=[{value:"Component Parameters",id:"component-parameters",level:3},{value:"Routing Parameters in the Component",id:"routing-parameters-in-the-component",level:3},{value:"Web Service Format",id:"web-service-format",level:3},{value:"SmartAPI Functions",id:"smartapi-functions",level:3},{value:"PlayAnnouncement",id:"playannouncement",level:3},{value:"Playback",id:"playback",level:3},{value:"SayNumber",id:"saynumber",level:3},{value:"SayDigit",id:"saydigit",level:3},{value:"SayDuration",id:"sayduration",level:3},{value:"SayClock",id:"sayclock",level:3},{value:"SayDate",id:"saydate",level:3},{value:"GetData",id:"getdata",level:3},{value:"MusicOnHold",id:"musiconhold",level:3},{value:"SetExten",id:"setexten",level:3},{value:"SetLimitOnCall",id:"setlimitoncall",level:3},{value:"ClearUserData",id:"clearuserdata",level:3},{value:"Exit",id:"exit",level:3}];function d(e){const n={admonition:"admonition",code:"code",h1:"h1",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"smart-api",children:"Smart API"})}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"SmartAPI"})," is a semi-interactive component used to execute a combination of commands on a server. It receives commands via a web service and applies them sequentially on calls. If an error occurs in one command, the execution of subsequent commands is halted. Additionally, you can create multiple outputs with different names for this component and manage the call routing to these outputs."]}),"\n",(0,a.jsx)(n.h3,{id:"component-parameters",children:"Component Parameters"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"API Address"}),": The web service URL to retrieve the command execution string."]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"routing-parameters-in-the-component",children:"Routing Parameters in the Component"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Case"}),": The output identifier. It is used by the Exit function (in the web service response)."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Text"}),": A name used only for display purposes in the component, which can be utilized for easy access."]}),"\n"]}),"\n",(0,a.jsx)(n.admonition,{type:"tip",children:(0,a.jsxs)(n.p,{children:["In case of an error in executing the commands or failure to receive a correct response from the web service, the call will exit from the output ",(0,a.jsx)(n.strong,{children:"e"}),"."]})}),"\n",(0,a.jsx)(n.h3,{id:"web-service-format",children:"Web Service Format"}),"\n",(0,a.jsxs)(n.p,{children:["Based on the values in the ",(0,a.jsx)(n.strong,{children:"API Method & API Version"})," settings, the web service URL is called with the following data sent:"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"src"}),": The caller's number (Caller or CID)."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"dst"}),": The entered number (Callee, DID, or Exten)."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"data"}),": Data entered by the caller during the call (e.g., data entered in IVR)."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"unique_id"}),": The unique identifier for the call."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"app_name"}),": The name of the current component."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"originated_call_id"}),": The unique identifier for the Originate call"]}),"\n"]}),"\n",(0,a.jsx)(n.admonition,{title:"info",type:"info",children:(0,a.jsx)(n.p,{children:"The originated_call_id, or the unique identifier for a two-way call, is only sent when a two-way call is initiated."})}),"\n",(0,a.jsxs)(n.p,{children:["The response from the web service will be returned in ",(0,a.jsx)(n.strong,{children:"JSON"})," format."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:'{\n  "ok": "1",\n  "commands": "PlayAnnouncement(\'announce01\'); SayNumber(5201); PlayAnnouncement(\'announce02\');"\n}\n'})}),"\n",(0,a.jsxs)(n.p,{children:["The above command first plays the audio file ",(0,a.jsx)(n.strong,{children:"announce01"}),", then reads the number ",(0,a.jsx)(n.strong,{children:"5201"}),", and finally plays the audio file ",(0,a.jsx)(n.strong,{children:"announce02"}),"."]}),"\n",(0,a.jsx)(n.h3,{id:"smartapi-functions",children:"SmartAPI Functions"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"SmartAPI has several functions, each performing a specific task. Below, we will review each of them."})}),"\n",(0,a.jsx)(n.h3,{id:"playannouncement",children:"PlayAnnouncement"}),"\n",(0,a.jsxs)(n.p,{children:["This function plays an audio announcement (the audio file must be uploaded previously in the audio section). The function's input is the name or ID of the audio file (for ID, use the format ",(0,a.jsx)(n.code,{children:":id"}),")."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"Format: PlayAnnouncement(<file:string >);\n\nPlayAnnouncement('id:5be6a5f294c28e3f068b4575');\n\nPlayAnnouncement ('filename-nasim');\n"})}),"\n",(0,a.jsx)(n.h3,{id:"playback",children:"Playback"}),"\n",(0,a.jsx)(n.p,{children:"The server's default audio files are played, and the input receives the name of the audio file."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"Format: Playback(<default-file-name:string >);\n\nPlayback('hello-world');\n"})}),"\n",(0,a.jsx)(n.h3,{id:"saynumber",children:"SayNumber"}),"\n",(0,a.jsx)(n.p,{children:"It reads a number sequentially (in the example below, it reads: five thousand two hundred and one)."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"Format: SayNumber(<number:int>);\n\nSayNumber(5201);\n"})}),"\n",(0,a.jsx)(n.h3,{id:"saydigit",children:"SayDigit"}),"\n",(0,a.jsx)(n.p,{children:"It reads a number digit by digit (in the example below, it reads: one, two, three, nine)."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"Format: SayDigit(<number:int>);\n\nSayDigit(1239);\n"})}),"\n",(0,a.jsx)(n.h3,{id:"sayduration",children:"SayDuration"}),"\n",(0,a.jsx)(n.p,{children:"It reads the duration (in the example below, it reads: six days, sixteen hours, and fifty-one seconds)."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"Format: SayDuration(<time:string(d.HH:MM:SS)>);\n\nSayDuration('6.16:0:51');\n"})}),"\n",(0,a.jsx)(n.h3,{id:"sayclock",children:"SayClock"}),"\n",(0,a.jsx)(n.p,{children:"It reads the time (in the example below: twelve hours, fourteen minutes, and nine seconds)."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"Format: SayClock(<time:string(HH:MM:SS)>);\n\nSayClock('12:14:09');\n"})}),"\n",(0,a.jsx)(n.admonition,{title:"Note",type:"tip",children:(0,a.jsx)(n.p,{children:"The inclusion of seconds in this function is optional."})}),"\n",(0,a.jsx)(n.h3,{id:"saydate",children:"SayDate"}),"\n",(0,a.jsx)(n.p,{children:'Reads the date (e.g., in the example: "21st of Ordibehesht, 1395").'}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"Format: SayDate(<date:string(YYYY-MM-DD)>, <calendar:string(gregorian/jalali/hijri)>);\n\nSayDate('1395-02-21', 'jalali');\n"})}),"\n",(0,a.jsx)(n.h3,{id:"getdata",children:"GetData"}),"\n",(0,a.jsx)(n.p,{children:"Receiving a number from the user."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"Format: GetData(<file:string>, <timeout:int>, <max-digit:int>);\n\nGetData('filename-please-enter-number', 10, 1);\n"})}),"\n",(0,a.jsxs)(n.p,{children:["By using the ",(0,a.jsx)(n.code,{children:":id"})," expression at the beginning of the file name, you can enter the audio file ID."]}),"\n",(0,a.jsx)(n.admonition,{title:"Note",type:"tip",children:(0,a.jsxs)(n.p,{children:["To read multiple files in the ",(0,a.jsx)(n.code,{children:"GetData"})," function, the ",(0,a.jsx)(n.code,{children:"&"})," operator is used as follows:"]})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"GetData('filename01&filename03&filename03', 10, 1);\n"})}),"\n",(0,a.jsx)(n.h3,{id:"musiconhold",children:"MusicOnHold"}),"\n",(0,a.jsx)(n.p,{children:"It receives the name of the waiting tone class and the duration (in seconds) for its playback."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"Format: MusicOnHold (<class_name:string >, <duration:int >);\n\nMusicOnHold(\u2018default\u2019, 60);\n"})}),"\n",(0,a.jsx)(n.h3,{id:"setexten",children:"SetExten"}),"\n",(0,a.jsx)(n.p,{children:"It applies the Exten value (for connecting to an extension)."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"Format: SetExten(<exten:string>);\n\nSetExten(\u2018200\u2019);\n"})}),"\n",(0,a.jsx)(n.h3,{id:"setlimitoncall",children:"SetLimitOnCall"}),"\n",(0,a.jsx)(n.p,{children:"It applies a time limit for the next call. (The input parameter is in seconds)."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"Format: SetLimitOnCall(<limit:int>);\n\nSetLimitOnCall(150);\n"})}),"\n",(0,a.jsx)(n.h3,{id:"clearuserdata",children:"ClearUserData"}),"\n",(0,a.jsxs)(n.p,{children:["This command clears the data that was entered in the previous steps of the Smart API (for example, when you call ",(0,a.jsx)(n.code,{children:"setExten"}),", in some cases, this function should also be called)."]}),"\n",(0,a.jsx)(n.h3,{id:"exit",children:"Exit"}),"\n",(0,a.jsx)(n.p,{children:"This function selects one of the exit paths to exit from the component. It is always the last function to execute. Note that no other function will run after it, and the call will exit from the SmartAPI component. If the case does not exist, the execution will result in an error."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"Format: Exit(<case:string>);\n\nExit('3');\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"To get more familiar, we will explore the implementation of a scenario using SmartAPI in the practical examples section."})})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>r});var t=i(6540);const a={},s=t.createContext(a);function l(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:l(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);