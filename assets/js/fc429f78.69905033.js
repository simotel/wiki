"use strict";(self.webpackChunkuimotelndefined=self.webpackChunkuimotelndefined||[]).push([[2004],{9517:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"developers/Scenarios/smart_api","title":"Smart API","description":"It is recommended to review this before reading this section.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/developers/4-Scenarios/1-smart_api.md","sourceDirName":"developers/4-Scenarios","slug":"/developers/Scenarios/smart_api","permalink":"/developers/Scenarios/smart_api","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{},"sidebar":"docs","previous":{"title":"Smart API","permalink":"/developers/SimotelWebhooks/DialplanApiComponents/smart_api"},"next":{"title":"Exten API","permalink":"/developers/Scenarios/exten_api"}}');var o=t(4848),r=t(8453);const i={title:void 0},a="Smart API",c={},l=[];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"smart-api",children:"Smart API"})}),"\n",(0,o.jsx)(n.admonition,{title:"Recommendation",type:"tip",children:(0,o.jsxs)(n.p,{children:["It is recommended to review ",(0,o.jsx)(n.a,{href:"/developers/SimotelWebhooks/DialplanApiComponents/smart_api",children:"this"})," before reading this section."]})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Scenario:"})," Suppose you need to receive a number from the user. If the number entered is 1, the call should be routed to path A, and if it is 2, it should be routed to path B."]}),"\n",(0,o.jsxs)(n.p,{children:["To implement the above scenario, you will need two SmartApi components. Let's name the first one ",(0,o.jsx)(n.code,{children:"s1"})," and the second one ",(0,o.jsx)(n.code,{children:"s2"}),". In the ",(0,o.jsx)(n.code,{children:"API address"})," field of both components, enter the address of the web service."]}),"\n",(0,o.jsxs)(n.p,{children:["In component ",(0,o.jsx)(n.code,{children:"s1"}),", create a route with the identifier ",(0,o.jsx)(n.code,{children:"go-s2"})," and connect its output to component ",(0,o.jsx)(n.code,{children:"s2"}),". In component ",(0,o.jsx)(n.code,{children:"s2"}),", create two routes with the identifiers ",(0,o.jsx)(n.code,{children:"go-a"})," and ",(0,o.jsx)(n.code,{children:"go-b"}),", and connect them to paths A (Sales Queue) and B (Support Queue) as per the scenario mentioned."]}),"\n",(0,o.jsx)(n.p,{children:"To view the scenario, click on the image below:"}),"\n",(0,o.jsx)("a",{href:"https://dialplan.mysup.ir/live/plan/fdckb8z6kula9q4o3jyug872z3otnhgmdco6w0gzawg7cte78a",target:"_blank",children:(0,o.jsx)("img",{src:"https://dialplan.mysup.ir/live/thumb/fdckb8z6kula9q4o3jyug872z3otnhgmdco6w0gzawg7cte78a/plan.png"})}),"\n",(0,o.jsxs)(n.p,{children:["Now, suppose a call enters component ",(0,o.jsx)(n.code,{children:"s1"}),". The web service will be called with the following values:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-shell",children:'{\n  "src": "09155441",\n  "dst": "789",\n  "app_name": "s1",\n  "data": ""\n}\n'})}),"\n",(0,o.jsx)(n.p,{children:"The web service will request the execution of the following functions and will require user input."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-shell",children:'{\n  "ok": "1",\n  "commands": "PlayAnnouncement(\'welcome-file\');GetData(\'enter-data-file\', 10, 1);Exit(\'go-s2\')"\n}\n'})}),"\n",(0,o.jsxs)(n.p,{children:["By executing the above instructions, first the welcome audio file will be played, then the user will be prompted to enter a number, and after that, the call will be transferred from the ",(0,o.jsx)(n.strong,{children:"go-s2"})," path to the ",(0,o.jsx)(n.strong,{children:"s2"})," component."]}),"\n",(0,o.jsxs)(n.p,{children:["In the ",(0,o.jsx)(n.strong,{children:"s2"})," component, a request similar to the one in ",(0,o.jsx)(n.strong,{children:"s1"})," will be sent to the server, but with two main differences:"]}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"The component name changes so that the web service can distinguish the source of the request."}),"\n",(0,o.jsxs)(n.li,{children:["The ",(0,o.jsx)(n.code,{children:"data"})," field will contain the value entered by the user in the previous step."]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-shell",children:'{\n  "src": "09155441",\n  "dst": "789",\n  "app_name": "s2",\n  "data": "2"\n}\n'})}),"\n",(0,o.jsx)(n.p,{children:"The web service, after receiving the number entered by the user in response, determines the appropriate path for their exit."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-shell",children:'{\n  "ok": "1",\n  "commands": "Exit(\'go-b\');"\n}\n'})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>a});var s=t(6540);const o={},r=s.createContext(o);function i(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);