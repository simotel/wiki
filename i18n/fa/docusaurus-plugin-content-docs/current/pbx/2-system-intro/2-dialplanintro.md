---
sidebar_position: 2
sidebar_label: "سناریو تماس"
title: "سناریو تماس"
---


# سناریوی‌تماس

تا اینجا بخش‌های اصلی قسمت `PBX` به‌جهت راه‌اندازی اولیه مرکز تماس خدمت شما معرفی شد. در این بخش، به بررسی کلی یکی از مهم‌ترین قسمت‌های سامانه، ویرایشگر `Dial Plan`، می‌پردازیم. در ادامه، روش کار با دایل‌پلن و نحوه استفاده از کامپوننت‌های آن را بررسی خواهیم کرد.

## سناریو‌تماس

کسب‌وکارها سناریوهای مختلفی را برای تماس‌های مشتریان خود در نظر می‌گیرند. برای مثال، در بسیاری از کسب‌وکارها، بازخورد مشتری بسیار مهم است و انتظار می‌رود قبل از اینکه تماس قطع شود، سیستم به‌طور خودکار نظرسنجی (`Poll`) از نحوه عملکرد اپراتور انجام دهد. در برخی کسب‌وکارها، موضوع پاسخگویی بسیار مهم است و کاربر انتظار دارد که در صورتی که شخصی با داخلی او تماس گرفت و او قادر به پاسخگویی نبود، تماس به شماره همراهش منتقل شود (`Follow Me`). در برخی سازمان‌ها نیز محدود کردن سطح دسترسی تماس‌های خروجی (`Outgoing Route`) کاربران امری ضروری است (مانند محدودیت دسترسی تماس‌های داخلی به داخلی، شهری، کشوری، یا بین‌المللی). این‌ها تنها چند نمونه از سناریوهایی هستند که ممکن است مجموعه شما برای خود در نظر بگیرد. برای پیاده‌سازی این سناریوها از `Dial Plan` استفاده می‌کنیم.



## دایل پلن `Dial Plan`

پیاده‌سازی یک سناریو تماس با تمام قابلیت‌ها در سیستم‌های ویپ معمولی کاری پیچیده و زمان‌بر است و در برخی موارد نیاز به برنامه‌نویسی دایل‌پلن می‌باشد. از این رو، در مرکز تماس سیموتل هدف بر پیاده‌سازی دایل‌پلنی است که بسیار ساده و کاربرپسند باشد. در دایل‌پلن سیموتل، کاربر با کدنویسی درگیر نمی‌شود و می‌تواند به راحتی المان‌های اصلی این بخش را درک کند و سناریوی مدنظر خود را پیاده‌سازی کند.

برای مشاهده سناریوی تماس پیاده سازی شده در دایل‌پلن بر روی تصویر کلیک کنید 

<a href='https://dialplan.mysup.ir/live/plan/uypn9ij1gu5molptuffpoe9tbx776smhwcnxo19elb3sidznc8' target='_blank'><img src='https://dialplan.mysup.ir/live/thumb/uypn9ij1gu5molptuffpoe9tbx776smhwcnxo19elb3sidznc8/plan.png' /></a>

:::tip نکته

در صورتی که به مرکز تماس دسترسی ندارید برای تست قابلیت‌های دایل‌پلن به **[اینجا](https://dialplan.mysup.ir/)** مراجعه کنید
:::

## اجزای دایل‌پلن



### صفحات `sheets`

دایل پلن طوری طراحی شده است که در صورت نیاز بتوانید صفحات مختلف ایجاد کرده و سناریوی خود را به بخش‌های کوچکتر شکسته و در هر صفحه به پیاده‌سازی آن بخش بپردازید،این 
قابلیت زمانی کاربرد دارد که سناریو تماس شما پیچیده می‌شود مثلا زمانی که از ماژول تماس انبوه استفاده می‌کنید بهتر است طراحی سناریو مربوط به تماس انبوه در یک صفحه اختصاصی 
صورت گیرد و با استفاده از کامپوننت‌های اتصالگر `Jump In & Jump Out`  به سناریو در صفحه اصلی متصل شود.

بطور پیشفرض در دایل‌پلن دو صفحه وجود دارد که به بررسی کاربرد هرکدام می‌پردازیم

- **صفحه incoming**: تمامی تماس‌های ورودی سیستم (زمانی که داخلی فرد شروع به زنگ خوردن می‌کند) در این صفحه مدیریت می‌شوند و برای ایجاد محدودیت زمان‌ کاری،اتصال تماس به صف،افزودن صندوق صوتی،انجام نظرسنجی،
 دریافت فکس باید در این صفحه تغییرات ایجاد شود.
 
- **صفحه outgoing**: تمامی تماس‌های خروجی سیستم (زمانی که فرد تلفن را برمی‌دارد و شروع به شماره گیری می‌کند) در این بخش مدیریت می‌شوند،برای اعمال محدودیت در تماس‌های خروجی ، 
ایجاد اتاق کنفرانس، شنود مکالمات،رزور مکالمات،PickUp باید در این صفحه تغییرات ایجاد شود.


### کامپوننت‌ها `components`

کامپوننت‌ها اجزائی هستند که در صفحه قرار گرفته و با استفاده از سیم کشی انجام شده و اتصال به‌یک‌دیگرسناریوی تماس را می‌سازند، هر کامپوننت کاربرد خاصی دارد 
و یکی از قابلیت‌های مرکز تماس را پوشش می‌دهد،برای مثال تمامی تماس‌های ورودی از کامپوننت `Incoming Route` شروع شده و پس از آن در دایل‌پلن توزیع می‌شوند.


برای مشخص کردن مسیر تماس در دایل‌پلن از سیم‌کشی استفاده می‌شود،با اتصال خروجی یک کامپوننت به ورودی کامپوننت دیگر مسیر تماس مشخص می‌شود،برای انجام این‌کار کافیست برروی 
خروجی یک کامپوننت کلیک کرده،یک سیم بوجود می‌آید، انتهای سیم را به ورودی کامپوننت بعدی متصل کنید.

<a href='https://dialplan.mysup.ir/live/plan/r7fpc1ug4qwvn59lnfeel9dknp18wyutp1niwu54o2y193z6vy' target='_blank'><img src='https://dialplan.mysup.ir/live/thumb/r7fpc1ug4qwvn59lnfeel9dknp18wyutp1niwu54o2y193z6vy/plan.png' /></a>

<br/>
<br/>

برای استفاده از کامپوننت‌ها در قسمت ‌بالا، سمت راست صفحه دایل‌پلن زبانه‌ای به نام **Components** وجود دارد که با کلیک بر‌روی
آن لیست کامپوننت‌های موجود نمایش داده می‌شود،برای مشاهده تمامی کامپوننت‌ها باید از اسکرول موس استفاده کنید،در نهایت نیز 
با Drag&Drop می‌توانید کامپوننت‌ها را بر روی‌ صفحه جایگذاری کنید.


### ویژگی‌های کامپوننت‌ها 

تمامی کامپوننت‌ها ویژگی مشترکی دارند که با کلیک می‌توان به این ویژگی‌ها دسترسی پیدا کرد

- **Edit**: هر کامپوننت باتوجه به کارایی خود تنضیمات خاصی دارد،با کلیک برروی کامپوننت شکل چرخ‌دنده‌ای در بالای آن ظاهر می‌شود که برای دسترسی به تنضیمات می‌باشد.

- **Duplicate**: بسیاری مواقع نیاز می‌باشد که از یک کامپوننت چندین بار در صفحه استفاده کرد،با استفاده از گزینه Duplicate می‌توان کپی از کامپوننت موجود تهیه کرد.

- **Remove**: این گزینه برای حذف کامپوننت از دایل‌پلن می‌باشد.

![Component properties](/img/compontnetprop.png)



## کامپوننت‌های پرکاربرد

### Incoming Route

این کامپوننت وظیفه  مدیریت تمامی تماس‌های ورودی به سیستم را‌ برعهده دارد. به عبارتی دیگر تمامی تماس‌های ورودی در دایل‌پلن از این کامپوننت شروع می‌شوند
 بنابراین در هر سناریوی تماس به جهت مدیریت تماس‌های وروی حتما یک کامپوننت Incoming Route وجود دارد،از جمله خواص مهم Incoming Route می‌توان به Context
 اشاره کرد که تعیین کننده سطح دسترسی است و باید با مقدار Context در ترانک‌های تعریف شده برابر باشد.در این کامپوننت براساس اولویت شماره مبداء و مقصد 
 امکان هدایت تماس به مسیر‌های متفاوت وجود دارد که در ادامه به بررسی آن می‌پردازیم.

:::tip نکته
در صورتی که در مقدار پیش‌فرض Context ترانک‌های تعریف‌شده تغییری ایجاد نشود این مقدار برابر با مقدار Context در Incoming Route می‌باشد.
:::


### Outgoinig Route

وظیفه Outgoing Route مدیریت تماس‌های خروجی در مرکز تماس می‌باشد،هر تماسی که از مبداء مرکز تماس شروع شود در ابتدا وارد این کامپوننت شده و پس از آن‌ باتوجه 
به سناریو چیده شده به مسیری که طراحی کرده‌ایم هدایت می‌شود،از این کامپوننت در صفحه Outgoing استفاده می‌شود و با توجه به اینکه مبداء تماس‌های خروجی سیستم این 
کامپوننت می‌باشد حتما یک کامپوننت Outgoing Route در صفحه خروجی نیاز می‌باشد.

در Outgoing Route می‌توان با استفاده از الگوی تطبیق ` Match Pattern` تماس‌ها را به مقاصد مختلف هدایت کرد،پیش‌نیاز استفاده حرفه‌ای از Outgoing Route آشنایی با نحوه 
الگونویسی می‌باشد که در آینده به بررسی آن می‌پردازیم.

یکی از ویژگی‌های اصلی Outgoing Route مقدار Context می‌باشد که با استفاده از آن می‌توان سطح دسترسی(تماس داخلی‌داخلی،شهری،کشوری،بین‌المللی) داخلی‌ها را محدود کرد.


:::tip نکته
در صورتی که در مقدار پیش‌فرض Context داخلی‌های تعریف‌شده تغییری ایجاد نشود این مقدار برابر با مقدار Context در Outgoing Route می‌باشد.
:::

### Exten
وظیفه این کامپوننت اتصال تماس به داخلی‌ها می‌باشد،هرجای دایل‌پلن که نیاز باشد تماس به داخلی‌ها متصل شود از Exten استفاده می‌شود، در استفاده از این کامپوننت دو حالت وجود دارد

- زمانی که مشخص است تماس به کدام داخلی باید متصل شود و تماس مستقیما به سمت داخلی هدایت می‌شود.

- زمانی که دامنه‌ای از داخلی‌ها وجود دارند و خود تماس گیرنده قرار است شماره داخلی که با آن کار دارد را وارد کند برای مثال در پاسخگوی صوتی.

در بخشEdit  کامپوننت، پارامتری به نام `Extention` وجود دارد،در صورتی که مستقیما شماره داخلی در آن انتخاب شود حالت اول پیاده سازی می‌شود و در صورتی نیز که شماره داخلی خاصی انتخاب 
نشود و مقدار این پارامتر خالی بماند هر شماره‌ای که در پاسخگوی صوتی گرفته شده باشد به عنوان داخلی در نظر گرفته می‌شود و حالت دوم رخ می‌دهد.


### Queue
وظیفه این کامپوننت اتصال تماس به صف می‌باشد،برای استفاده از آن در بخش Edit کامپوننت مقدار پارامتر `Queue` را برابر با نام صف ساخته شده در
 بخش `PBX > Queues` قرار دهید،از آن به بعد تماس‌ها به سمت صف انتخاب شده هدایت می‌شوند.
 
 
 
### Announcement
 
در صورتی که نیاز باشد فایل صوتی برای کاربر پخش شود از این کامپوننت استفاده می‌شود،برای انتخاب فایل صوتی در بخش 
Edit کامپوننت مقدار پارامتر `Announcement` را برابر با نام فایل صوتی آپلود شده قرار دهید.
 
:::caution هشدار

حتما قبل از هر کامپومننت `Announcement` از کامپوننت `Answer` استفاده شود و خروجی `Answer` به `Announcement` متصل شود.
:::
 
 
 
### IVR

از این کامپوننت برای راه اندازی یک پاسخگوی صوتی استفاده می‌شود، برای بارگذاری فایل صوتی بر روی Edit کامپوننت کلیک کنید و مقدار پارامتر ` Announcement` را 
برابر با نام فایل صوتی قرار دهید. 
 
در IVR برای هدایت تماس به مقاصد مختلف از ویژگی به نام `case` استفاده می‌شود،برای افزودن `case` جدید در IVR باید از گزینه ➕ در کامپوننت استفاده کنید.

- تعریف case:
زمانی که یک پاسخگوی صوتی پخش می‌شود بسته به فایل صوتی بارگذاری شده یک‌سری انتخاب‌ها در اختیار تماس گیرنده قرار می‌دهد مثلا عدد یک را بزنید تا به بخش فروش متصل 
شوید،از طرفی باید برای سیستم مشخص شود زمانی که تماس‌گیرنده عدد یک را وارد کرد چه اتفاقی باید بیفتاد و تماس چه مسیری را طی کند، به این کار تعریف Case در IVR 
گوییم.

- قبل از هر IVR حتما از یک کامپوننت Answer استفاده شود.
 
### Time Condition

با استفاده از این کامپوننت می‌توان شرط زمانی را چک کرد.

**مثال)**: شخصی به مجموعه زنگ می‌زند

اگر شرط ساعت کاری و روز‌های هفته برقرار باشند،تماس از مسیر️✔️  خارج می‌شود و به سمت پاسخگوی صوتی هدایت شود.

اگر شرط ساعت‌کاری یا روزهای هفته برقرار نباشد،تماس از مسیر ❌ خارج می‌شود و در نهایت اعلام کند خارج از زمان‌کاری تماس گرفته‌اید. 

برای تنظیم محدودیت زمانی بر روی Edit کامپوننت کلیک کنید با کلیک بر روی علامت ➕ در روزهای هفته می‌توان ساعات کاری خود را مشخص کنید


**بررسی‌های دقیقتر دایل‌پلن در بخش [مربوطه](../pbx-menu/dialplan/intro) انجام می‌شود.**