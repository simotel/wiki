---
sidebar_label: "فضای پشتیبان"
title: "فضای پشتیبان"
---


# BackUp Drive

یکی از قابلیت‌های کلیدی مرکز تماس Simotel، امکان انتقال فایل‌های پشتیبان (Backup) روزانه و هفتگی به سرور FTP و یا فضای ابری می‌باشد. این کار به جهت جلوگیری از دست رفتن اطلاعات در زمان‌هایی است که سیستم به مشکل بر می‌خورد و امکان بازیابی اطلاعات وجود ندارد (disaster recovery plan).

در نظر داشته باشید پس از اعمال تنظیمات مورد نیاز در Simotel، بکاپ‌گیری بصورت خودکار و سیستمی صورت می‌گیرد و نیاز به انجام کاری دیگر نمی‌باشد. این قابلیت در نسخه 6.1.9 و نسخه‌های بعدی ارائه شده است.

:::tip نکته
بکاپ‌های خودکار مرکز تماس شامل فایل صوتی مکالمات ضبط شده (Call Record) نمی‌شود و در صورت نیاز به بکاپ از فایل‌های صوتی مربوط به مکالمات، این کار باید بصورت دستی انجام شود (دلیل: حجم بالا فایل پشتیبان در صورت وجود فایل‌های صوتی ضبط مکالمات).
:::

## روش‌های بکاپ گیری

۱.	با استفاده از سرورFTP و به صورت لوکال.

۲.	با استفاده از  DropBoxو بر‌روی فضای ابری.

### راه اندازی سرور FTP و اتصال مرکز تماس Simotel به آن

در مرحله اول نیاز به راه اندازی سرور FTP می‌باشد، به همین جهت نرم‌افزار vsftpd را بر روی سیستم عامل debian 9 نصب می‌کنیم، مراحل نصب و ایجاد کاربر به شرح زیر می‌باشد:

```shell
apt-get update
apt-get upgrade
sudo apt install vsftpd
systemctl start vsftpd
systemctl enable vsftpd
vsftpd -versions

```
دستور نهایی به جهت بررسی وضعیت نصب نرم‌افزار است که خروجی آن باید نسخه FTP نصب شده را نمایش دهد.


```shell
cp /etc/vsftpd.conf /etc/vsftpd.conf.orig

```
ایجاد فایل بکاپ از تنظیمات پیش‌فرض نرم‌افزارvsftpd.


```shell
nano /etc/vsftpd.conf

```

در نهایت نیاز می‌باشد که تنظیمات در فایل vsftpd.conf مشابه شکل پایین باشند.

![1](/img/simotel/backup_ftp_dropbox/1.png)


```shell
service vsftpd restart

```
سرویس راه اندازی شد!


#### ایجاد کاربر در سرور FTP

```shell
ساخت کاربر 
sudo adduser vahid

افزودن دسترسی 
cho "vahid" | sudo tee -a /etc/vsftpd.userlist

با ریست سرویس کاربر افزوده می‌شود
service vsftpd restart

```

#### اتصال مرکز تماس Simotel به سرور FTP راه‌اندازی شده

تنظیمات مطابق شکل زیر انجام شود

![2](/img/simotel/backup_ftp_dropbox/2.png)

در صورتی که تنظیمات به درستی انجام شود پس از کلیک بر روی گزینه Test&Save باید خروجی Backup Drive Is OK برگردانده شود.


### اتصال مرکزتماس Simotel به DropBox

برای انجام این کار در ابتدا نیاز به ایجاد حساب DropBox می‌باشد که نسخه ابتدایی آن به صورت رایگان در اختیار کاربر قرار گرفته است. پس از ایجاد حساب، نیاز به انجام تنظیمات مربوط برای ایجاد Token می‌باشد که در پایین به بررسی آن می‌پردازیم.

#### ایجادToken

نرم‌افزار DropBox با استفاده از API خود به کاربران اجازه می‌دهد که بدون نیاز به دسترسی مستقیم به نرم‌افزار و از طریق API ارائه شده، امکان ذخیره و بازیابی اطلاعات در فضای ابری اختصاص داده شده به مشترک را داشته باشند. نرم‌افزار Simotel از این قابلیت DropBox برای ذخیره بکاپ‌های روزانه و هفتگی استفاده می‌کند.

برای استفاده از این قابلیت، پس از ساخت اکانت DropBox، نیاز است که از بخش APP Center یک اپلیکیشن جدید ساخته شود که اجازه دسترسی به حساب ما را دارد. پس از آن، نیاز است که تعریف کنیم که دسترسی به این اپلیکیشن از طریق توکن می‌باشد و با استفاده از قابلیت **Generated access token**، یک توکن با دسترسی "Write File" ساخته شود و به Simotel داده شود.

توضیحات آن به شرح زیر در تصاویر ارائه شده است:

۱. پس از باز کردن حساب خود مشابه تصویر وارد بخش App Center شوید(برای مشاهده با کیفیت بهتر Sidebar را ببندید).

![3](/img/simotel/backup_ftp_dropbox/3.png)




۲. در بخش App Center باید گزینه Build an app در گوشه سمت چپ انتخاب شود.

![4](/img/simotel/backup_ftp_dropbox/4.png)




۳. در صفحه بعدی نیز باید گزینه Create apps انتخاب شود.

![5](/img/simotel/backup_ftp_dropbox/5.png)



۴. در این قسمت سطح دسترسی‌ها مشخص می‌شوند که با توجه به اینکه هدف از راه‌اندازی DropBox بکاپ‌گیری از سیستم بوده است، سطح دسترسی کامل به حساب خود را به اپلیکیشن می‌دهیم. در نهایت نیز نامی برای اپلیکیشن خود انتخاب کرده و دکمه **Create App** را می‌زنیم.

![6](/img/simotel/backup_ftp_dropbox/6.png)



۵. پس از ساخت اپلیکیشن، در بخش **Permission** می‌توان سطح دسترسی‌ها (read, write) به بخش‌های مختلف را مشخص کرد. با توجه به اینکه قرار است بکاپ بر روی حساب ما بارگذاری شود، باید تیک **files.content.write** زده شود.

![7](/img/simotel/backup_ftp_dropbox/7.png)



۶. در نهایت، در بخش **Settings** باید تنظیمات مربوط به توکن انجام شود. با کلیک بر روی گزینه **Generate** یک توکن یکتا ایجاد می‌شود که با استفاده از آن می‌توان به حساب خود دسترسی پیدا کرد (از طریق API). Simotel با استفاده از این توکن تولید شده به حساب دسترسی پیدا می‌کند و فایل بکاپ را بارگذاری می‌کند. بخش **Access expiration** باید برابر با **No expiration** باشد. این بخش زمانی کاربرد دارد که هدف ایجاد دسترسی کوتاه‌مدت باشد و پس از آن دسترسی اپلیکیشن با استفاده از توکن باید بسته شود، که هدف ما این نیست.

![8](/img/simotel/backup_ftp_dropbox/8.png)


۷. در صورتی که Simotel به اینترنت دسترسی داشته باشد، پس از قرار دادن توکن و کلیک بر روی دکمه **Test & Save** باید خروجی **Backup Drive is OK** را مشاهده فرمایید.

![9](/img/simotel/backup_ftp_dropbox/9.png)




۸. در نهایت، در صورتی که تنظیمات به‌درستی انجام شده باشند، باید در **Inbox** خود فایلی به نام **simotel.test.txt** را مشاهده فرمایید که Simotel در تست اولیه خود برای بررسی وضعیت ارتباطی با DropBox بارگذاری می‌کند. از این به بعد، بکاپ‌ها به‌صورت روزانه و هفتگی در پایان روز در **Drive** شما بارگذاری می‌شوند.

![10](/img/simotel/backup_ftp_dropbox/10.png)



در صورت نیاز به بررسی بیشتر قابلیت API نرم‌افزار DropBox به لینک **[اینجا](https://www.youtube.com/watch?v=FMOXbmoAG8I)** مراجعه فرمایید.